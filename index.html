<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Resume Screener</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&family=Rajdhani:wght@700&family=Exo+2:wght@900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="screener.css" />
  <script src="galaxy.js" defer></script>
</head>

<body data-galaxy data-stars="250" data-speed="0.4" data-color-scheme="purple">
  <div style="
position:fixed;
bottom:10px;
right:10px;
background:#111;
color:#fff;
padding:8px 14px;
border-radius:6px;
font-size:12px;
opacity:0.8;
z-index:9999;">
    Live backend available during demo sessions
  </div>
  <!-- Top Left Brand -->
  <div class="site-brand">
    <span class="brand-text">ARS</span>
  </div>

  <div class="overlay">
    <div class="bg-circle circle-1"></div>
    <div class="bg-circle circle-2"></div>
    <div class="bg-circle circle-3"></div>
    <div class="bg-circle circle-4"></div>
  </div>

  <div class="container">
    <h1>AI Resume Screener</h1>
    <p>Upload your resume and let AI match you with the best job opportunities.</p>

    <form id="resumeForm" enctype="multipart/form-data">
      <div class="input-group">
        <input type="text" name="name" placeholder="Full Name" required />
      </div>

      <div class="input-group">
        <input type="email" name="email" placeholder="Email Address" required />
      </div>

      <div class="input-group">
        <div class="custom-select" id="roleSelect">
          <div class="select-trigger">Select Job Role </div>
          <div class="select-options">
            <div class="option">Software Engineer</div>
            <div class="option">Frontend Developer</div>
            <div class="option">Backend Developer</div>
            <div class="option">Full Stack Developer</div>
            <div class="option">Data Scientist</div>
            <div class="option">Data Analyst</div>
            <div class="option">AI Engineer</div>
            <div class="option">Machine Learning Engineer</div>
            <div class="option">MLOps Engineer</div>
            <div class="option">Prompt Engineer</div>
            <div class="option">AI Automation Engineer</div>
            <div class="option">DevOps Engineer</div>
            <div class="option">Cloud Engineer</div>
            <div class="option">Cybersecurity Analyst</div>
            <div class="option">Mobile App Developer</div>
            <div class="option">UI/UX Designer</div>
            <div class="option">Product Manager</div>
            <div class="option">QA Automation Engineer</div>
            <div class="option">Blockchain Developer</div>
            <div class="option">AR/VR Developer</div>
          </div>
        </div>

       <input type="hidden" name="role" id="selectedRole">
      </div>


      <div class="input-group file-upload">
        <input type="file" id="resumeFile" name="resume"
          accept=".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
          required />
      </div>

      <button type="submit">Upload Resume</button>
    </form>

    <footer>Powered by <strong>n8n</strong> â€¢ <strong>OpenAI</strong> â€¢ <strong>Airtable</strong></footer>
  </div>

  <div id="popup" class="popup">âœ… Resume submitted successfully!</div>

  <!-- Loader Overlay -->
  <div id="loaderOverlay" class="loader-overlay">
    <div>
      <div class="loader"></div>
      <div class="loader-text">Uploading your resume...</div>
    </div>
  </div>

   <script src="config.js"></script>

<script>
// ================= FORM CORE =================

const form = document.getElementById("resumeForm");
const submitBtn = form.querySelector('button[type="submit"]');
const loaderOverlay = document.getElementById("loaderOverlay");

// ================= CUSTOM DROPDOWN =================

const customSelect = document.getElementById("roleSelect");
const trigger = customSelect.querySelector(".select-trigger");
const options = customSelect.querySelectorAll(".option");
const hiddenInput = document.getElementById("selectedRole");

trigger.addEventListener("click", () => {
  customSelect.classList.toggle("open");
});

options.forEach(option => {
  option.addEventListener("click", () => {
    trigger.textContent = option.textContent;
    hiddenInput.value = option.textContent;
    customSelect.classList.add("selected");
    customSelect.classList.remove("open");
  });
});

document.addEventListener("click", e => {
  if (!customSelect.contains(e.target)) {
    customSelect.classList.remove("open");
  }
});

// ================= RESET FUNCTION =================

function resetFormUI() {

  form.reset();

  // File reset fix
  document.getElementById("resumeFile").value = "";

  // Dropdown reset
  trigger.textContent = "Select Job Role";
  hiddenInput.value = "";
  customSelect.classList.remove("selected");
}

// ================= FORM SUBMIT =================

form.addEventListener("submit", function (e) {

  e.preventDefault();

  const selectedRole = hiddenInput.value;
  const fileInput = document.getElementById("resumeFile");
  const file = fileInput.files[0];

  if (!selectedRole) {
    showPopup("âš ï¸ Please select job role", true);
    return;
  }

  if (!file) {
    showPopup("âš ï¸ Upload resume file", true);
    return;
  }

  const maxSize = 10 * 1024 * 1024;
  if (file.size > maxSize) {
    showPopup("âš ï¸ File must be under 10MB", true);
    return;
  }

  const webhookUrl = (window.APP_CONFIG && window.APP_CONFIG.webhookUrl) || "YOUR_KEY_VALUE";

  const formData = new FormData(form);

  showLoader();
  showPopup("ðŸ“¤ Uploading resume...", false, true);

  const xhr = new XMLHttpRequest();
  xhr.timeout = 60000;

  xhr.onload = function () {

    hideLoader();

    if (xhr.status >= 200 && xhr.status < 300) {

      showPopup("âœ… Resume submitted successfully!", false);
      resetFormUI();

    } else {

      demoFallback();
    }
  };

  xhr.onerror = function () {

    hideLoader();
    demoFallback();
  };

  xhr.ontimeout = function () {

    hideLoader();
    showPopup("âš ï¸ Upload timeout. Try again.", true);
  };

  xhr.open("POST", webhookUrl, true);
  xhr.send(formData);
});

// ================= DEMO MODE =================

function demoFallback() {

  showPopup("âš¡ Demo mode activated", false);

  setTimeout(() => {
    showPopup("âœ… Resume processed (Demo)", false);
    resetFormUI();
  }, 3500);
}

// ================= UI HELPERS =================

function showLoader() {
  submitBtn.disabled = true;
  submitBtn.textContent = "Uploading...";
  loaderOverlay.classList.add("active");
}

function hideLoader() {
  submitBtn.disabled = false;
  submitBtn.textContent = "Upload Resume";
  loaderOverlay.classList.remove("active");
}

function showPopup(message, isError = false, isProcessing = false) {

  const popup = document.getElementById("popup");

  popup.textContent = message;
  popup.classList.toggle("error", isError);
  popup.classList.toggle("processing", isProcessing);

  popup.classList.add("show");

  setTimeout(() => {
    popup.classList.remove("show");
  }, isProcessing ? 60000 : 4000);
}
</script>
 
</body>

</html>